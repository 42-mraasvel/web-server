***********************************
********** Testing Scope **********
***********************************

[P]: python tester
[C]: c++ tester
[B]: bash script
[?]: to decide
-y: done
-n: not-done

+---------------------+
|     Config File     |
+---------------------+
	------ Config File Error ------
		[B-n] TODO: to add more
			- Can also be done using Catch2 to avoid executing the entire webserver
			- Simple bash script and directory full of invalid files for syntax errors

	------ Server Block directive ------
		[P-y] Listen: Interface (host:port) resolution
				- same server_name but different Interface
		[P-y] Server_name: resolution
				[C-n] - empty server_name & empty host header 
				- default block: take first server if no server_name match
				- wildcard
					- exactmatch | longest| front| back| front > back
		[P-y] Default error page
				- Force a 404 error: Status Code and body should match the error page
				- Error with nonexistant error page
		[P-y] Client Max Body Size (max body too small)

	------ Location Block directive ------
		[P-y] Location block resolution
				- match | not found | exact match
		[P-y] Method allowed (GET, POST, DELETE)
				- HeaderField (allowed: x)
		[P-y] Root Directory (empty root, root syntax error)
		[P-y] Auto Index
		[P-y] Default File
		[PC-n] CGI: executable to test in/output
				- Header-Fields
				- StatusCode
				- Environment variables
				- Errors (BAD_GATEWAY, Syntax)
				- CGI timeout
		[P-y] upload_store (see Method Execution - POST)
		[P-y] return/redirection (GET/POST/DELETE)

+---------------------+
|        Process      |
+---------------------+
	------ Connection Management ------
		[C-y] connection: close
		[C-y] timeout
		[C-y] Unsafe Pipeline:
			- Large Post -> GET (all bytes) -> DELETE -> GET (404) on posted file: to check if unsafe method is not executed concurrently
		[C-y] connection: keep-alive

	------ HTTP 1.0 ------
		[C-y] connection need to be closed unless header [connection = keep-alive]
		A: [C-n] TODO: to add test list

	------ Settings ------
		- Preset settings to pass all tests with
		[C-n] time out
		[???] BUFFER_SIZE
		[???] LIMITS
		[???] Chunked
		[???] TODO: to add test list
	
	------ Method Execution ------
		[P-y] GET
				- 200
				- 404 NOT_FOUND
				[???]- 403 FORBIDDEN (unable to set to 'user has no read permission')
		[P-y] POST
				- with upload_store (201 CREATED, 204 NO_CONTENT)
				- w/o upload_store >> root (201 CREATED, 204 NO_CONTENT)
				- 403 FORBIDDEN (file, directory)
		[P-y] DELETE
				- 204 NO_CONTENT
				- 404 NOT_FOUND
				- 403 FORBIDDEN (file, directory)
	------ Bad Agent ------
		[C-y] Infinite header fields

+---------------------+
|       Response      |
+---------------------+
	------ Response Code ------
		[C-y] 100 CONTINUE 
		[P-y] 201 CREATED (see Method Execution - POST)
				- Location header should be request target
		[P-y] 204 NO_CONTENT (see Method Execution - POST/DELETE)
		[P-y] 301 MOVED_PERMANENTLY (see ServerBlock-ErrorPage)
		[C-y] 3xx REDIRECT  
				- Location header-field
				- Response Code (for different redirection types)
				- Retry-After header-field
		[C-y] 400 BAD_REQUEST 
				- First line
					- Method (case-sensitive) | Target | version (case-sensitive) | Delimeter (space +end) | whitespace not allowed inside each component | URI_TOO_LONG
				- Header
					- [Host]
						[???] - multiple host field
						- HTTP 1.1 without host field
						- One host: wrong port | syntax error
					- [connection != close | keep-alive]
					- [expect != 100-continue] (see status_code)
					- [content-length] != digit
					- WS before ":"
					- line end with ";"
				[???]- message_body
				[???]- TODO: RequestValidator functions: check one by one
		[P-y] 403 FORBIDDEN (see Method Execution)
		[P-y] 404 NOT_FOUND (see Method Execution)
		[P-y] 405 METHOD_NOT_ALLOWED (see LocationBlock-MethodAllowed)
				- check headerfield 'Allow'
		A: [C-n] 408 REQUEST_TIMEOUT
		[P-y] 413 PAYLOAD_TOO_LARGE (see ServerBlock-ClientMaxSize)
		[???] 415 UNSUPPORTED_MEDIA_TYPE
		[P-y] 417 EXPECTATION_FAILED
		[C-y] 431 REQUEST_HEADER_FIELDS_TOO_LARGE
		[P-y] 500 INTERNAL_SERVER_ERROR (through out whole program)
		[P-y] 501 NOT_IMPLEMENTED
				- method other than: GET POST DELETE)
				- Request header "Transfer-Encoding" other than: chunked (close connection)
		[PC-n] 502 BAD_GATEWAY
		[PC-n] 504 GATEWAY_TIMEOUT
		[C-y] 505 HTTP_VERSION_NOT_SUPPORTED 

	------ Response Header Field ------
		[P-y] Date
				- check if date string len = 29
		[P-y] Connection
				- "keep-alive": test by default
				- "close":
					- Request header [Transfer-Encoding != chunked] (see Response 501)
					- HTTP 1.1 request header [connection = close]
					[C-y] HTTP 1.0 request header [connection != keep-alive] 
		[P-y] Location
				- 201 CREATED (see Method Execution - POST)
				- 3xx: location should be effective request uri (check location presence in defaultEvaluator)
		[P-y] Retry-After
				- should present in all 3xx response (check presence in defaultEvaluator)
		[P-y] Allow (see Location Block - Method allowed & Response Code 405)
		[P-y] Content-Length
				- cannot present together with Transfer-Encoding (check in defaultEvaluator)
		[PC-n] Transfer-Encoding
		[P-n] Content-Type
			Check nonexistant extensions and no extension for content-type


************** Question / To-Discuss **************
1. Request Method containing different marks, some return 501 some returns 400
	>> 501 {"GE.T", "3GET", "G1ET.", "GE5T", "GET0", "GET!", "!GET", "GE!T", "GE#T", "G$ET", "G^ET"};
	>> 400 {"?GET", "G/ET", "GE;T", "GET?"};

2. Request Target
	- 200 OK with index file
		- GET /?!243 HTTP/1.1 
		- GET /??? HTTP/1.1  (/.... and /%#@$#^ is 400)
	- 404 Not Found
		- GET /!! HTTP/1.1
		- GET /**** HTTP/1.1

3. Request Host
	- HeaderField cannot send multiple Host field?
	- header field end with ";" does not respond 400
	(header-field = field-name ":" OWS field-value OWS)
		- Host | Content-length | Content-type
	- WS between host and port does not respond 400
	(Host = uri-host [ ":" port ] ; Section 2.7.1)
		- "localhost :8080" or "locahost: 8080"

4. in 400 BAD_REQUEST (this note): [???]- TODO: RequestValidator functions: check one by one
